<%= content_for :vendor_assets do %>
  <script src="https://www.google.com/recaptcha/api.js?render=<%= @recaptcha.site_key %>" data-turbolinks-track="reload"></script>

  <script>
    document.addEventListener('turbolinks:load', function() {
      grecaptcha.ready(function() {
        grecaptcha.execute('<%= @recaptcha.site_key %>', { action: '<%= @recaptcha.action %>' }).then(function(token) {
          document.getElementById('<%= @recaptcha.id %>').value = token;
        });
      });
    });
  </script>
<% end %>

<input name="recaptcha_token" type="hidden" id="<%= @recaptcha.id %>">
